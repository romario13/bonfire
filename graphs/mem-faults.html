<!DOCTYPE html> <html lang="en"> <head>     <meta charset="UTF-8">     <title>Flame Graph</title>      <style inline="">.btn,.header h3{margin-bottom:0}.btn,.details,.matched{vertical-align:middle}.btn,.chart{text-align:center}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px}.header{padding-right:15px;padding-left:15px;display:table;content:" ";height:45px}.btn,input{padding:6px 12px}.details{display:table-cell;width:100%}.controls{display:table}.matched{display:table-cell;color:#777}.header h3{margin-top:0;line-height:40px}a{color:#337ab7;text-decoration:none;background-color:transparent}.form-inline{display:table}.form-inline *{margin-right:5px}input{display:block;width:120px;height:20px;line-height:1.42857143;color:#555;background:#fff;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.btn{display:table-cell;white-space:nowrap;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}</style>  </head> <body>  <div>     <div class="header">         <div id="details" class="details">&nbsp;</div>         <div class="controls">             <div id="matched" class="matched">&nbsp;</div>             <form class="form-inline" id="form" action="#" onsubmit="search(); return false;">                 <a class="btn" href="javascript: resetZoom();">Reset zoom</a>                 <a class="btn" href="javascript: clear();">Clear</a>                 <input type="text" id="term">                 <a class="btn btn-primary" href="javascript: search();">Search</a>             </form>         </div>     </div>     <div id="flameGraph" class="chart"></div> </div>  <script type="text/javascript">bonfire={},function(){"use strict";bonfire.flameGraph=function(){function e(){return e}function n(){function t(e){if(u(v.dict[e[0]]))B+=e[1];else if(e.length>2)for(var n=2;n<e.length;n++)t(e[n])}function r(e,n,t,a,o,f,c,d,g){function s(e,n,t,r){var i=r+"#"+t,a=E[i];if("undefined"!=typeof a)return n.substring(0,a);if(e.measureText(n).width>t){var l=Math.floor(n.length/2),u=-1;if(0==l)n="";else{for(var o,f=n.length,c=l;f+=l*u,o=n.substring(0,f),0!=f;){var d=e.measureText(o).width>t;if(-1==u?d||(u=1):d&&(u=-1),l=Math.floor(l/2),1>l&&(l=1),!d&&1==l&&c==-u)break;c=u}n=o}}return E[i]=n.length,n}var m=a;g?(g=g.slice(1),0==g.length&&(g=null)):m=f[1]/o*a,3==e&&console.log(c,a,f[1],v.dict[f[0]],m);var p;p=u&&u(v.dict[f[0]])?[230,0,230]:y[f[0]],g&&(p=i(p,.5)),C.fillStyle="rgb("+p[0]+","+p[1]+","+p[2]+")";var x=m-1;.5>x&&(x=.5),C.fillRect(t,n,x,-h);var b={x:t,y:n,w:x+1,h:-h,d:f,n:c,p:d};l(e).push(b);var w=m-S,k=v.dict[f[0]];if(C.fillStyle="#000000",C.font=j,k=s(C,k,w,f[0]),k.length>0&&C.fillText(k,t+O,n-S,w),2==f.length)return m;for(var M=0,L=2;L<f.length;L++)M+=f[L][1];var H=0;g?H=a:(H=M/f[1]*m,t+=m-H);for(var L=2;L<f.length;L++){var I=!1;if(g){if(L-2!=g[0])continue;I=!0}if(t+=r(e+1,n-h-1,t,H,M,f[L],L-2,b,g),I)break}return m}function a(){f&&(C.putImageData(o,0,0),f=null,M(""))}function b(e,n){var t=H.getBoundingClientRect(),r=e-t.left,i=n-t.top,a=Math.ceil((D-i)/(h+1)),u=l(a);if(0!=u.length)for(var o=0;o<u.length;o++)if(u[o].x<=r&&u[o].x+u[o].w>=r)return u[o]}function M(e){var n=document.getElementById(m);n&&(""===e?n.innerHTML="&nbsp;":n.innerHTML=e),H.title=e}function L(e){var n=document.getElementById(p);n&&(""===e?n.innerHTML="&nbsp;":n.innerHTML=e),H.title=e}w={};var H=document.createElement("canvas");H.width=d,H.height=g,H.style.backgroundColor="#EEEEEE";var I=document.getElementById(s),T=I.children[0];T?I.replaceChild(H,T):I.appendChild(H);var C=H.getContext("2d"),O=h/6,S=2*O,j=Math.floor(h-S)+"px Arial";k=v.flame[1];var B=0;-1==x&&(u?(t(v.flame),x=B,L("Matched:&nbsp;"+B.toLocaleString()+"&nbsp;samples,&nbsp;"+(B/v.flame[1]*100).toFixed(2)+"%")):L(""));var R,A=h,D=g-h;return c&&(R=c.slice(),0==R.length&&(R=null)),r(1,D,A,d-2*h,k,v.flame,0,null,R),o=C.getImageData(0,0,d,g),H.addEventListener("mousemove",function(e){var n=b(e.clientX,e.clientY);if(!n)return void a();if(f!=n){a(),f=n;var t=(f.d[1]/k*100).toFixed(2);M(v.dict[f.d[0]]+" ("+f.d[1].toLocaleString()+" samples, "+t+"%)"),C.beginPath(),C.strokeStyle="#000000",C.rect(f.x,f.y,f.w,f.h),C.closePath(),C.stroke()}},!1),H.addEventListener("click",function(e){var t=b(e.clientX,e.clientY);if(t){for(var r=[];r.push(t.n),t.p;)t=t.p;c=r.reverse(),n()}},!1),e}function t(e,n){var t=r(e),i=L[n];i||(i=L.black);var a=i[0];i[1]>0&&(a+=t%i[1]);var l=i[2];i[3]>0&&(l+=t%i[3]);var u=i[4];return i[5]>0&&(u+=t%i[5]),[a,l,u]}function r(e){var n=0;if(e.length>0)for(var t=0;t<e.length;t++)n=31*n+e.charCodeAt(t);return n}function i(e,n){for(var t=e.slice(),r=0;3>r;r++)t[r]+=Math.round((255-e[r])*n);return t}function a(e){var n,t=e.match(M);return t&&(n=t.pop(),e=e.replace(M,"")),!n||-1==n.indexOf("jdk")&&-1==n.indexOf("jre")&&-1==n.indexOf("jvm")?-1!=e.indexOf("/")||n&&-1!=n.indexOf("tmp/perf-")?"green":-1!=e.indexOf("([k")?"orange":"red":"yellow"}function l(e){var n=w[e];return n||(n=[],w[e]=n),n}var u,o,f,c,d=.97*window.screen.availWidth,g=.8*window.screen.availHeight,h=18,v={},s="flameGraph",m="details",p="matched",x=-1,b=function(e){return"#888888"},w={},y={},E={},k=0,M=new RegExp("/([^()]*)");e.draw=function(){for(var r=0;r<v.dict.length;r++)y[r]=t(v.dict[r],b(v.dict[r]));return n(),e},e.update=function(){return n(),e};var L={red:[200,55,80,50,80,50],green:[50,60,200,55,50,60],blue:[80,60,80,60,205,50],yellow:[175,55,175,55,50,20],purple:[190,65,80,60,190,65],aqua:[50,60,165,55,165,55],orange:[190,65,90,65,0,0],black:[0,0,0,0,0,0]};return e.detailsId=function(n){return arguments.length?(m=n,e):m},e.height=function(n){return arguments.length?(g=n,e):g},e.autoHeight=function(){function n(e,t){var r=t;if(e.length>2)for(var i=2,a=e.length;a>i;i++){var l=n(e[i],t+1);l>r&&(r=l)}return r}var t=n(v.flame,1);return g=(t+2)*(h+1),e},e.width=function(n){return arguments.length?(d=n,e):d},e.cellHeight=function(n){return arguments.length?(h=n-1,e):h},e.placeId=function(n){return arguments.length?(s=n,e):s},e.data=function(n){return arguments.length?(v=n,e):v},e.color=function(n){return arguments.length?("java"===n&&(b=a),e):b},e.search=function(n){return arguments.length?((null==n||"function"==typeof n)&&(u=n,x=-1),e):u},e.resetZoom=function(){return c=null,e},e}}();</script> <script type="text/javascript" id="data">var data={dict:["root","java"," _ZN11OptoRuntime11new_array_CEP5KlassiP10JavaThread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _new_array_Java (/tmp/perf-19845.map)"," [unknown] ([unknown])"," Lexamples/Mem;::firstMethod (/tmp/perf-19845.map)"," Interpreter (/tmp/perf-19845.map)"," call_stub (/tmp/perf-19845.map)"," _ZN9JavaCalls11call_helperEP9JavaValueP12methodHandleP17JavaCallArgumentsP6Thread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN9JavaCalls12call_virtualEP9JavaValue11KlassHandleP6SymbolS4_P17JavaCallArgumentsP6Thread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN9JavaCalls12call_virtualEP9JavaValue6Handle11KlassHandleP6SymbolS5_P6Thread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZL12thread_entryP10JavaThreadP6Thread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN10JavaThread17thread_main_innerEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN10JavaThread3runEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZL10java_startP6Thread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," start_thread (/lib/x86_64-linux-gnu/libpthread-2.19.so)"," _ZN17PSParallelCompact18MarkAndPushClosure6do_oopEPP7oopDesc (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN15ClassLoaderData7oops_doEP10OopClosureP12KlassClosureb (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN5frame19oops_interpreted_doEP10OopClosureP10CLDClosurePK11RegisterMapb (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN10JavaThread7oops_doEP10OopClosureP10CLDClosureP15CodeBlobClosure (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN22ThreadRootsMarkingTask5do_itEP13GCTaskManagerj (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN12GCTaskThread3runEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN10ArrayKlass7oops_doEP10OopClosure (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN13ObjArrayKlass19oop_follow_contentsEP20ParCompactionManagerP7oopDesc (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN20ParCompactionManager21follow_marking_stacksEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN16StealMarkingTask5do_itEP13GCTaskManagerj (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN7Monitor4waitEblb (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN12CompileQueue3getEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN13CompileBroker20compiler_thread_loopEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN14JNIHandleBlock7oops_doEP10OopClosure (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN19InstanceMirrorKlass19oop_follow_contentsEP20ParCompactionManagerP7oopDesc (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN17MarkFromRootsTask5do_itEP13GCTaskManagerj (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN20ParCompactionManager16region_list_pushEjm (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN17PSParallelCompact29enqueue_region_draining_tasksEP11GCTaskQueuej (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN17PSParallelCompact7compactEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN17PSParallelCompact16invoke_no_policyEb (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN10PSScavenge6invokeEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN20ParallelScavengeHeap19failed_mem_allocateEm (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN29VM_ParallelGCFailedAllocation4doitEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN12VM_Operation8evaluateEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN8VMThread18evaluate_operationEP12VM_Operation (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN8VMThread4loopEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN8VMThread3runEv (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN8VMThread7executeEP12VM_Operation (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN20ParallelScavengeHeap12mem_allocateEmPb (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN14TypeArrayKlass15allocate_commonEibP6Thread (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"," _ZN13InstanceKlass19oop_follow_contentsEP20ParCompactionManagerP7oopDesc (/opt/jdk1.8.0_66/jre/lib/amd64/server/libjvm.so)"],flame:[0,577,[1,577,[4,122,[4,122,[3,122,[2,122,[45,18,[44,18,[43,18,[26,18]]]]]]]],[15,455,[14,455,[13,252,[12,252,[11,249,[10,249,[9,249,[8,249,[7,249,[6,249,[6,249,[5,249]]]]]]]],[28,3,[27,3,[26,3]]]]],[21,188,[25,42,[23,3],[24,39,[23,39]]],[31,13,[24,13,[46,5],[23,7],[30,1]]],[20,133,[19,124,[18,124,[17,124,[22,18,[16,18]],[29,8,[16,8]],[16,98]]]],[24,9,[46,1],[23,8]]]],[42,15,[41,15,[40,15,[39,15,[38,15,[37,15,[36,15,[35,15,[34,15,[33,15,[32,15]]]]]]]]]]]]]]]};</script> <script type="text/javascript">function search(){var e=document.getElementById("term").value;if(!e||""===e.trim())return void clear();var a=new RegExp(e);flameGraph.search(function(e){return e.match(a)?!0:!1}).update()}function clear(){document.getElementById("term").value="",flameGraph.search(null).update()}function resetZoom(){flameGraph.resetZoom().update()}var re=new RegExp("examples"),flameGraph=bonfire.flameGraph().data(data).cellHeight(18).autoHeight().placeId("flameGraph").detailsId("details").color("java").draw();</script>  </body> </html>